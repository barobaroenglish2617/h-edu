<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phonics Reading - Blossom English</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.css" />
    <style>
        body { font-family: 'Pretendard', sans-serif; }
        /* 로딩 애니메이션 (선택사항) */
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">

    <div class="max-w-4xl mx-auto p-6">
        <button onclick="history.back()" class="mb-6 px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium hover:bg-gray-100 transition flex items-center gap-2">
            ← 메인으로
        </button>

        <h1 class="text-3xl font-bold text-gray-900 mb-2">Phonics Reading</h1>
        <p class="text-gray-600 mb-10">읽고 싶은 이야기를 선택하세요.</p>

        <div id="book-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
            <div id="loading-message" class="col-span-full text-center py-20">
                <div class="loader"></div>
                <p class="text-gray-500 mt-4">데이터를 불러오는 중...</p>
            </div>
        </div>
    </div>

    <script>
        // 1. Supabase 설정 (본인의 URL과 Key로 교체 필수!)
        const supabaseUrl = 'YOUR_SUPABASE_URL'; 
        const supabaseKey = 'YOUR_SUPABASE_ANON_KEY';
        const supabase = supabase.createClient(supabaseUrl, supabaseKey);

        // 2. DOM 요소 가져오기
        const bookGrid = document.getElementById('book-grid');
        const loadingMessage = document.getElementById('loading-message');

        // 3. 1~13번 책 목록 생성 함수
        async function loadBooks() {
            try {
                // (나중에 DB 연결 시 여기에 await supabase... 코드 작성)
                // 지금은 강제로 1~13번 배열 생성
                const books = Array.from({ length: 13 }, (_, i) => ({
                    id: i + 1,
                    title: `Story ${i + 1}`,
                    level: 'Phonics'
                }));

                // 로딩 메시지 숨기기 (핵심!)
                loadingMessage.style.display = 'none';

                // 데이터가 비었으면 처리
                if (books.length === 0) {
                    bookGrid.innerHTML = '<p class="text-center col-span-full">표시할 책이 없습니다.</p>';
                    return;
                }

                // 4. HTML 생성 및 렌더링
                books.forEach(book => {
                    const card = document.createElement('div');
                    card.className = "bg-white p-6 rounded-xl shadow-sm hover:shadow-md transition cursor-pointer border border-gray-100 text-center group";
                    
                    // 카드 클릭 시 이동할 링크 설정 (예: detail.html?id=1)
                    card.onclick = () => {
                        alert(`${book.title}을(를) 선택했습니다.`);
                        // location.href = `reading_detail.html?id=${book.id}`;
                    };

                    card.innerHTML = `
                        <div class="w-16 h-16 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-xl font-bold mx-auto mb-4 group-hover:bg-blue-600 group-hover:text-white transition">
                            ${book.id}
                        </div>
                        <h3 class="text-lg font-bold text-gray-800 group-hover:text-blue-600">${book.title}</h3>
                        <p class="text-sm text-gray-400 mt-1">${book.level}</p>
                    `;
                    
                    bookGrid.appendChild(card);
                });

            } catch (error) {
                console.error('에러 발생:', error);
                loadingMessage.innerHTML = `<p class="text-red-500">데이터 로드 실패. 관리자에게 문의하세요.</p>`;
            }
        }

        // 페이지 로드 시 실행
        document.addEventListener('DOMContentLoaded', loadBooks);
    </script>
</body>
</html>
